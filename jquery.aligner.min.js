/*************************************************
**  jQuery Aligner 0.5
**  Copyright Jared Hardy, licensed MIT
**************************************************/
(function(a){a.fn.aligner=function(b){var d={getOffset:function(e){return e.offset().left},drawGrid:function(k,j){var f,g=c.columnWidth+c.gutterWidth,h=a(document).height();$gridCanvas=document.getElementById(k);if($gridCanvas.getContext){var e=$gridCanvas.getContext("2d");e.clearRect(0,0,$gridCanvas.width,$gridCanvas.height);e.fillStyle=c.gridColor;for(f=0;f<c.columns;f++){e.fillRect(g*f,0,c.columnWidth,h)}}},drawBaseline:function(i){var h,g=document.getElementById(i),f=c.baselineHeight;a(baselineCanvas).attr({width:a(window).width(),height:a(document).height()});if(g.getContext){var e=g.getContext("2d");e.clearRect(0,0,g.width,g.height);e.strokeStyle=c.baselineColor;e.lineWidth=1;for(h=0;h<a(document).height();h+=f){e.beginPath();e.moveTo(0,(h+f)-0.5);e.lineTo(g.width,h+f);e.stroke()}}},resize:function(e){a("#gridCanvas").css("left",e)},setUp:function(e,f,j){var i=((c.columnWidth+c.gutterWidth)*c.columns)-c.gutterWidth,h=a("<canvas />").attr({id:"gridCanvas",width:i,height:a(document).height(),style:"position: absolute; top: 0; left: 0; display: none;"}),g=a("<canvas />").attr({id:"baselineCanvas",style:"position: absolute; top: 0; left: 0; display: none;"});a("body").append(h).append(g);d.drawGrid(e);d.resize(j);d.drawBaseline(f)},init:function(e){d.setUp("gridCanvas","baselineCanvas",d.getOffset(e))}};var c=a.extend({},a.fn.aligner.defaults,b);a(document).keypress(function(f){if(f.keyCode===103){a("#gridCanvas").toggle()}if(f.keyCode===98){a("#baselineCanvas").toggle()}});a(window).bind("resize",function(){d.resize(d.getOffset($this));d.drawBaseline("baselineCanvas")});return d.init(a(this[0]))};a.fn.aligner.defaults={columnWidth:60,gutterWidth:20,columns:12,baselineHeight:16,gridColor:"rgba(255, 0, 0, 0.3)",baselineColor:"rgba(255, 0, 0, 1)"}})(jQuery);